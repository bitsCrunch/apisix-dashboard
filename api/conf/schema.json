{
  "plugins": {
    "authz-casbin": {
      "schema": {
        "type": "object",
        "oneOf": [
          {
            "required": [
              "model_path",
              "policy_path",
              "username"
            ]
          },
          {
            "required": [
              "model",
              "policy",
              "username"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "model": {
            "type": "string"
          },
          "username": {
            "type": "string"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "policy": {
            "type": "string"
          },
          "model_path": {
            "type": "string"
          },
          "policy_path": {
            "type": "string"
          }
        }
      },
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "required": [
          "model",
          "policy"
        ],
        "properties": {
          "model": {
            "type": "string"
          },
          "policy": {
            "type": "string"
          }
        }
      },
      "priority": 2560
    },
    "request-id": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "algorithm": {
            "type": "string",
            "default": "uuid",
            "enum": [
              "uuid",
              "snowflake",
              "nanoid",
              "range_id"
            ]
          },
          "header_name": {
            "type": "string",
            "default": "X-Request-Id"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "include_in_response": {
            "type": "boolean",
            "default": true
          },
          "range_id": {
            "type": "object",
            "properties": {
              "char_set": {
                "type": "string",
                "minLength": 6,
                "default": "abcdefghijklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ0123456789"
              },
              "length": {
                "type": "integer",
                "minimum": 6,
                "default": 16
              }
            }
          }
        }
      },
      "priority": 12015
    },
    "proxy-mirror": {
      "version": 0.1,
      "priority": 1010,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "host"
        ],
        "properties": {
          "host": {
            "type": "string",
            "pattern": "^http(s)?:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?$"
          },
          "path": {
            "type": "string",
            "pattern": "^/[^?&]+$"
          },
          "sample_ratio": {
            "type": "number",
            "minimum": 0.00001,
            "maximum": 1,
            "default": 1
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "path_concat_mode": {
            "type": "string",
            "description": "the concatenation mode for custom path",
            "enum": [
              "replace",
              "prefix"
            ],
            "default": "replace"
          }
        }
      }
    },
    "basic-auth": {
      "consumer_schema": {
        "properties": {
          "username": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        },
        "title": "work with consumer object",
        "required": [
          "username",
          "password"
        ],
        "type": "object",
        "encrypt_fields": [
          "password"
        ]
      },
      "schema": {
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "hide_credentials": {
            "type": "boolean",
            "default": false
          }
        },
        "title": "work with route or service object",
        "$comment": "this is a mark for our injected plugin schema",
        "type": "object"
      },
      "type": "auth",
      "version": 0.1,
      "priority": 2520
    },
    "response-rewrite": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "dependencies": {
          "filters": {
            "not": {
              "required": [
                "body"
              ]
            }
          },
          "body": {
            "not": {
              "required": [
                "filters"
              ]
            }
          }
        },
        "properties": {
          "body": {
            "type": "string",
            "description": "new body for response"
          },
          "headers": {
            "anyOf": [
              {
                "type": "object",
                "minProperties": 1,
                "patternProperties": {
                  "^[^:]+$": {
                    "oneOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      }
                    ]
                  }
                }
              },
              {
                "properties": {
                  "set": {
                    "type": "object",
                    "minProperties": 1,
                    "patternProperties": {
                      "^[^:]+$": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      }
                    }
                  },
                  "remove": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string",
                      "pattern": "^[^:]+$"
                    }
                  },
                  "add": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string",
                      "pattern": "^[^:]+:[^:]+[^/]$"
                    }
                  }
                }
              }
            ],
            "description": "new headers for response"
          },
          "body_base64": {
            "type": "boolean",
            "default": false,
            "description": "whether new body for response need base64 decode before return"
          },
          "vars": {
            "type": "array"
          },
          "status_code": {
            "type": "integer",
            "minimum": 200,
            "maximum": 598,
            "description": "new status code for response"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "filters": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "scope": {
                  "type": "string",
                  "default": "once",
                  "enum": [
                    "once",
                    "global"
                  ],
                  "description": "regex substitution range"
                },
                "options": {
                  "type": "string",
                  "default": "jo",
                  "description": "regex options"
                },
                "regex": {
                  "type": "string",
                  "minLength": 1,
                  "description": "match pattern on response body"
                },
                "replace": {
                  "type": "string",
                  "description": "regex substitution content"
                }
              },
              "required": [
                "regex",
                "replace"
              ],
              "description": "filter that modifies response body"
            },
            "minItems": 1,
            "description": "a group of filters that modify response bodyby replacing one specified string by another"
          }
        }
      },
      "priority": 899
    },
    "limit-conn": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "conn",
          "burst",
          "default_conn_delay",
          "key"
        ],
        "properties": {
          "only_use_default_delay": {
            "type": "boolean",
            "default": false
          },
          "rejected_msg": {
            "type": "string",
            "minLength": 1
          },
          "burst": {
            "type": "integer",
            "minimum": 0
          },
          "key_type": {
            "type": "string",
            "default": "var",
            "enum": [
              "var",
              "var_combination"
            ]
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "conn": {
            "type": "integer",
            "exclusiveMinimum": 0
          },
          "key": {
            "type": "string"
          },
          "allow_degradation": {
            "type": "boolean",
            "default": false
          },
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "maximum": 599,
            "default": 503
          },
          "default_conn_delay": {
            "type": "number",
            "exclusiveMinimum": 0
          }
        }
      },
      "priority": 1003
    },
    "serverless-post-function": {
      "version": 0.1,
      "priority": -2000,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "functions"
        ],
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "functions": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "phase": {
            "type": "string",
            "enum": [
              "rewrite",
              "access",
              "header_filter",
              "body_filter",
              "log",
              "before_proxy"
            ],
            "default": "access"
          }
        }
      }
    },
    "limit-count": {
      "version": 0.4,
      "schema": {
        "if": {
          "properties": {
            "policy": {
              "enum": [
                "redis"
              ]
            }
          }
        },
        "else": {
          "if": {
            "properties": {
              "policy": {
                "enum": [
                  "redis-cluster"
                ]
              }
            }
          },
          "then": {
            "properties": {
              "redis_cluster_nodes": {
                "type": "array",
                "minItems": 2,
                "items": {
                  "type": "string",
                  "minLength": 2,
                  "maxLength": 100
                }
              },
              "redis_cluster_name": {
                "type": "string"
              },
              "redis_cluster_ssl": {
                "type": "boolean",
                "default": false
              },
              "redis_cluster_ssl_verify": {
                "type": "boolean",
                "default": false
              },
              "redis_password": {
                "type": "string",
                "minLength": 0
              },
              "redis_timeout": {
                "type": "integer",
                "minimum": 1,
                "default": 1000
              }
            },
            "required": [
              "redis_cluster_nodes",
              "redis_cluster_name"
            ]
          }
        },
        "required": [
          "count",
          "time_window"
        ],
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "then": {
          "properties": {
            "redis_host": {
              "type": "string",
              "minLength": 2
            },
            "redis_port": {
              "type": "integer",
              "minimum": 1,
              "default": 6379
            },
            "redis_password": {
              "type": "string",
              "minLength": 0
            },
            "redis_database": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "redis_timeout": {
              "type": "integer",
              "minimum": 1,
              "default": 1000
            }
          },
          "required": [
            "redis_host"
          ]
        },
        "properties": {
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "maximum": 599,
            "default": 503
          },
          "rejected_msg": {
            "type": "string",
            "minLength": 1
          },
          "key_type": {
            "type": "string",
            "default": "var",
            "enum": [
              "var",
              "var_combination",
              "constant"
            ]
          },
          "time_window": {
            "type": "integer",
            "exclusiveMinimum": 0
          },
          "group": {
            "type": "string"
          },
          "policy": {
            "type": "string",
            "default": "local",
            "enum": [
              "local",
              "redis",
              "redis-cluster"
            ]
          },
          "count": {
            "type": "integer",
            "exclusiveMinimum": 0
          },
          "key": {
            "type": "string",
            "default": "remote_addr"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "show_limit_quota_header": {
            "type": "boolean",
            "default": true
          },
          "allow_degradation": {
            "type": "boolean",
            "default": false
          }
        }
      },
      "priority": 1002
    },
    "node-status": {
      "scope": "global",
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "priority": 1000
    },
    "key-auth-custom": {
      "consumer_schema": {
        "properties": {
          "key": {
            "type": "string"
          },
          "exp": {
            "type": "integer"
          },
          "disable": {
            "type": "boolean",
            "default": false
          }
        },
        "required": [
          "key"
        ],
        "type": "object",
        "encrypt_fields": [
          "key"
        ]
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "query": {
            "type": "string",
            "default": "apikey"
          },
          "hide_credentials": {
            "type": "boolean",
            "default": false
          },
          "header": {
            "type": "string",
            "default": "apikey"
          }
        }
      },
      "type": "auth",
      "version": 0.1,
      "priority": 2500
    },
    "authz-keycloak": {
      "version": 0.1,
      "schema": {
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1000,
            "default": 3000
          },
          "client_id": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "grant_type": {
            "minLength": 1,
            "maxLength": 100,
            "enum": [
              "urn:ietf:params:oauth:grant-type:uma-ticket"
            ],
            "type": "string",
            "default": "urn:ietf:params:oauth:grant-type:uma-ticket"
          },
          "resource_registration_endpoint": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4096
          },
          "client_secret": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100
          },
          "policy_enforcement_mode": {
            "type": "string",
            "default": "ENFORCING",
            "enum": [
              "ENFORCING",
              "PERMISSIVE"
            ]
          },
          "keepalive_pool": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "keepalive": {
            "type": "boolean",
            "default": true
          },
          "lazy_load_paths": {
            "type": "boolean",
            "default": false
          },
          "http_method_as_scope": {
            "type": "boolean",
            "default": false
          },
          "cache_ttl_seconds": {
            "type": "integer",
            "minimum": 1,
            "default": 86400
          },
          "keepalive_timeout": {
            "type": "integer",
            "minimum": 1000,
            "default": 60000
          },
          "refresh_token_expires_in": {
            "type": "integer",
            "minimum": 1,
            "default": 3600
          },
          "refresh_token_expires_leeway": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "password_grant_token_generation_incoming_uri": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4096
          },
          "access_token_expires_in": {
            "type": "integer",
            "minimum": 1,
            "default": 300
          },
          "access_token_expires_leeway": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "discovery": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4096
          },
          "access_denied_redirect_uri": {
            "type": "string",
            "minLength": 1,
            "maxLength": 2048
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "permissions": {
            "type": "array",
            "default": {},
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "uniqueItems": true
          },
          "ssl_verify": {
            "type": "boolean",
            "default": true
          },
          "token_endpoint": {
            "type": "string",
            "minLength": 1,
            "maxLength": 4096
          }
        },
        "required": [
          "client_id"
        ],
        "type": "object",
        "encrypt_fields": [
          "client_secret"
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "allOf": [
          {
            "anyOf": [
              {
                "required": [
                  "discovery"
                ]
              },
              {
                "required": [
                  "token_endpoint"
                ]
              }
            ]
          },
          {
            "anyOf": [
              {
                "properties": {
                  "lazy_load_paths": {
                    "enum": [
                      false
                    ]
                  }
                }
              },
              {
                "properties": {
                  "lazy_load_paths": {
                    "enum": [
                      true
                    ]
                  }
                },
                "anyOf": [
                  {
                    "required": [
                      "discovery"
                    ]
                  },
                  {
                    "required": [
                      "resource_registration_endpoint"
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      "priority": 2000
    },
    "prometheus": {
      "version": 0.2,
      "priority": 500,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "prefer_name": {
            "type": "boolean",
            "default": false
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "fault-injection": {
      "version": 0.1,
      "priority": 11000,
      "schema": {
        "type": "object",
        "minProperties": 1,
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "delay": {
            "type": "object",
            "required": [
              "duration"
            ],
            "properties": {
              "duration": {
                "type": "number",
                "minimum": 0
              },
              "vars": {
                "type": "array",
                "items": {
                  "type": "array"
                },
                "maxItems": 20
              },
              "percentage": {
                "type": "integer",
                "maximum": 100,
                "minimum": 0
              }
            }
          },
          "abort": {
            "type": "object",
            "required": [
              "http_status"
            ],
            "properties": {
              "http_status": {
                "type": "integer",
                "minimum": 200
              },
              "body": {
                "type": "string",
                "minLength": 0
              },
              "vars": {
                "type": "array",
                "items": {
                  "type": "array"
                },
                "maxItems": 20
              },
              "percentage": {
                "type": "integer",
                "maximum": 100,
                "minimum": 0
              }
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "real-ip": {
      "version": 0.1,
      "priority": 23000,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "source"
        ],
        "properties": {
          "trusted_addresses": {
            "type": "array",
            "minItems": 1,
            "items": {
              "anyOf": [
                {
                  "type": "string",
                  "title": "IPv4",
                  "format": "ipv4"
                },
                {
                  "type": "string",
                  "title": "IPv4/CIDR",
                  "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
                },
                {
                  "type": "string",
                  "title": "IPv6",
                  "format": "ipv6"
                },
                {
                  "type": "string",
                  "title": "IPv6/CIDR",
                  "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
                }
              ]
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "source": {
            "type": "string",
            "minLength": 1
          },
          "recursive": {
            "type": "boolean",
            "default": false
          }
        }
      }
    },
    "kafka-logger": {
      "priority": 403,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "type": "object",
        "oneOf": [
          {
            "required": [
              "broker_list",
              "kafka_topic"
            ]
          },
          {
            "required": [
              "brokers",
              "kafka_topic"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 3
          },
          "brokers": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "host",
                "port"
              ],
              "properties": {
                "host": {
                  "type": "string",
                  "description": "the host of kafka broker"
                },
                "sasl_config": {
                  "type": "object",
                  "properties": {
                    "password": {
                      "type": "string",
                      "description": "password"
                    },
                    "mechanism": {
                      "type": "string",
                      "enum": [
                        "PLAIN"
                      ],
                      "default": "PLAIN"
                    },
                    "user": {
                      "type": "string",
                      "description": "user"
                    }
                  },
                  "required": [
                    "user",
                    "password"
                  ],
                  "description": "sasl config"
                },
                "port": {
                  "type": "integer",
                  "minimum": 1,
                  "maximum": 65535,
                  "description": "the port of kafka broker"
                }
              }
            },
            "minItems": 1,
            "uniqueItems": true
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "meta_format": {
            "type": "string",
            "enum": [
              "default",
              "origin"
            ],
            "default": "default"
          },
          "log_format": {
            "type": "object"
          },
          "kafka_topic": {
            "type": "string"
          },
          "producer_type": {
            "type": "string",
            "enum": [
              "async",
              "sync"
            ],
            "default": "async"
          },
          "key": {
            "type": "string"
          },
          "required_acks": {
            "type": "integer",
            "enum": [
              0,
              1,
              -1
            ],
            "default": 1
          },
          "cluster_name": {
            "type": "integer",
            "minimum": 1,
            "default": 1
          },
          "producer_batch_num": {
            "type": "integer",
            "minimum": 1,
            "default": 200
          },
          "broker_list": {
            "type": "object",
            "minProperties": 1,
            "patternProperties": {
              ".*": {
                "type": "integer",
                "minimum": 1,
                "maximum": 65535,
                "description": "the port of kafka broker"
              }
            }
          },
          "producer_max_buffering": {
            "type": "integer",
            "minimum": 1,
            "default": 50000
          },
          "producer_time_linger": {
            "type": "integer",
            "minimum": 1,
            "default": 1
          },
          "meta_refresh_interval": {
            "type": "integer",
            "minimum": 1,
            "default": 30
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "name": {
            "type": "string",
            "default": "kafka logger"
          },
          "include_req_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "include_resp_body": {
            "type": "boolean",
            "default": false
          },
          "include_resp_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          },
          "producer_batch_size": {
            "type": "integer",
            "minimum": 0,
            "default": 1048576
          }
        }
      }
    },
    "ext-plugin-post-req": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allow_degradation": {
            "type": "boolean",
            "default": false
          },
          "conf": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": [
                "name",
                "value"
              ],
              "properties": {
                "value": {
                  "type": "string"
                },
                "name": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 128
                }
              }
            }
          }
        }
      },
      "priority": -3000
    },
    "tcp-logger": {
      "priority": 405,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "host",
          "port"
        ],
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "tls": {
            "type": "boolean",
            "default": false
          },
          "tls_options": {
            "type": "string"
          },
          "name": {
            "type": "string",
            "default": "tcp logger"
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "host": {
            "type": "string"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "port": {
            "type": "integer",
            "minimum": 0
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          }
        }
      }
    },
    "api-breaker": {
      "version": 0.1,
      "priority": 1005,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "break_response_code"
        ],
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "healthy": {
            "type": "object",
            "properties": {
              "http_statuses": {
                "uniqueItems": true,
                "type": "array",
                "default": [
                  200
                ],
                "minItems": 1,
                "items": {
                  "type": "integer",
                  "maximum": 499,
                  "minimum": 200
                }
              },
              "successes": {
                "type": "integer",
                "minimum": 1,
                "default": 3
              }
            },
            "default": {
              "http_statuses": [
                200
              ],
              "successes": 3
            }
          },
          "unhealthy": {
            "type": "object",
            "properties": {
              "http_statuses": {
                "uniqueItems": true,
                "type": "array",
                "default": [
                  500
                ],
                "minItems": 1,
                "items": {
                  "type": "integer",
                  "maximum": 599,
                  "minimum": 500
                }
              },
              "failures": {
                "type": "integer",
                "minimum": 1,
                "default": 3
              }
            },
            "default": {
              "http_statuses": [
                500
              ],
              "failures": 3
            }
          },
          "break_response_code": {
            "type": "integer",
            "maximum": 599,
            "minimum": 200
          },
          "break_response_body": {
            "type": "string"
          },
          "break_response_headers": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "key",
                "value"
              ],
              "properties": {
                "key": {
                  "type": "string",
                  "minLength": 1
                },
                "value": {
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          },
          "max_breaker_sec": {
            "type": "integer",
            "minimum": 3,
            "default": 300
          }
        }
      }
    },
    "syslog": {
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "host",
          "port"
        ],
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 3000
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "host": {
            "type": "string"
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "flush_limit": {
            "type": "integer",
            "minimum": 1,
            "default": 4096
          },
          "drop_limit": {
            "type": "integer",
            "default": 1048576
          },
          "sock_type": {
            "type": "string",
            "enum": [
              "tcp",
              "udp"
            ],
            "default": "tcp"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "tls": {
            "type": "boolean",
            "default": false
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "pool_size": {
            "type": "integer",
            "minimum": 5,
            "default": 5
          },
          "port": {
            "type": "integer"
          },
          "name": {
            "type": "string",
            "default": "sys logger"
          }
        }
      },
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "priority": 401
    },
    "gzip": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "types": {
            "default": [
              "text/html"
            ],
            "anyOf": [
              {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "string",
                  "minLength": 1
                }
              },
              {
                "enum": [
                  "*"
                ]
              }
            ]
          },
          "http_version": {
            "default": 1.1,
            "enum": [
              1.1,
              1
            ]
          },
          "buffers": {
            "type": "object",
            "properties": {
              "size": {
                "type": "integer",
                "minimum": 1,
                "default": 4096
              },
              "number": {
                "type": "integer",
                "minimum": 1,
                "default": 32
              }
            },
            "default": {
              "size": 4096,
              "number": 32
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "min_length": {
            "type": "integer",
            "minimum": 1,
            "default": 20
          },
          "comp_level": {
            "type": "integer",
            "minimum": 1,
            "maximum": 9,
            "default": 1
          },
          "vary": {
            "type": "boolean"
          }
        }
      },
      "priority": 995
    },
    "ext-plugin-pre-req": {
      "version": 0.1,
      "priority": 12000,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allow_degradation": {
            "type": "boolean",
            "default": false
          },
          "conf": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": [
                "name",
                "value"
              ],
              "properties": {
                "value": {
                  "type": "string"
                },
                "name": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 128
                }
              }
            }
          }
        }
      }
    },
    "udp-logger": {
      "priority": 400,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "host",
          "port"
        ],
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 3
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "name": {
            "type": "string",
            "default": "udp logger"
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "host": {
            "type": "string"
          },
          "port": {
            "type": "integer",
            "minimum": 0
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          }
        }
      }
    },
    "serverless-pre-function": {
      "version": 0.1,
      "priority": 10000,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "functions"
        ],
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "functions": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "phase": {
            "type": "string",
            "enum": [
              "rewrite",
              "access",
              "header_filter",
              "body_filter",
              "log",
              "before_proxy"
            ],
            "default": "access"
          }
        }
      }
    },
    "request-validation": {
      "type": "validation",
      "version": 0.1,
      "priority": 2800,
      "schema": {
        "type": "object",
        "anyOf": [
          {
            "required": [
              "header_schema"
            ]
          },
          {
            "required": [
              "body_schema"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "maximum": 599,
            "default": 400
          },
          "rejected_msg": {
            "type": "string",
            "minLength": 1,
            "maxLength": 256
          },
          "header_schema": {
            "type": "object"
          },
          "body_schema": {
            "type": "object"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "traffic-split": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "rules": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "match": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "vars": {
                        "type": "array"
                      }
                    }
                  }
                },
                "weighted_upstreams": {
                  "default": [
                    {
                      "weight": 1
                    }
                  ],
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "upstream": {
                        "type": "object",
                        "oneOf": [
                          {
                            "required": [
                              "nodes"
                            ]
                          },
                          {
                            "required": [
                              "service_name",
                              "discovery_type"
                            ]
                          }
                        ],
                        "properties": {
                          "timeout": {
                            "type": "object",
                            "required": [
                              "connect",
                              "send",
                              "read"
                            ],
                            "properties": {
                              "read": {
                                "type": "number",
                                "exclusiveMinimum": 0
                              },
                              "send": {
                                "type": "number",
                                "exclusiveMinimum": 0
                              },
                              "connect": {
                                "type": "number",
                                "exclusiveMinimum": 0
                              }
                            }
                          },
                          "pass_host": {
                            "type": "string",
                            "default": "pass",
                            "enum": [
                              "pass",
                              "node",
                              "rewrite"
                            ],
                            "description": "mod of host passing"
                          },
                          "upstream_host": {
                            "type": "string",
                            "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                          },
                          "update_time": {
                            "type": "integer"
                          },
                          "scheme": {
                            "description": "The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.",
                            "default": "http",
                            "enum": [
                              "grpc",
                              "grpcs",
                              "http",
                              "https",
                              "tcp",
                              "tls",
                              "udp",
                              "kafka"
                            ]
                          },
                          "service_name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 256
                          },
                          "create_time": {
                            "type": "integer"
                          },
                          "labels": {
                            "type": "object",
                            "patternProperties": {
                              ".*": {
                                "minLength": 1,
                                "maxLength": 64,
                                "type": "string",
                                "description": "value of label",
                                "pattern": "^\\S+$"
                              }
                            },
                            "description": "key/value pairs to specify attributes"
                          },
                          "key": {
                            "type": "string",
                            "description": "the key of chash for dynamic load balancing"
                          },
                          "tls": {
                            "type": "object",
                            "dependencies": {
                              "client_cert": {
                                "required": [
                                  "client_key"
                                ],
                                "not": {
                                  "required": [
                                    "client_cert_id"
                                  ]
                                }
                              },
                              "client_key": {
                                "required": [
                                  "client_cert"
                                ],
                                "not": {
                                  "required": [
                                    "client_cert_id"
                                  ]
                                }
                              },
                              "client_cert_id": {
                                "not": {
                                  "required": [
                                    "client_client",
                                    "client_key"
                                  ]
                                }
                              }
                            },
                            "properties": {
                              "client_cert": {
                                "type": "string",
                                "minLength": 128,
                                "maxLength": 65536
                              },
                              "client_key": {
                                "type": "string",
                                "minLength": 128,
                                "maxLength": 65536
                              },
                              "client_cert_id": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "minLength": 1,
                                    "maxLength": 64,
                                    "pattern": "^[a-zA-Z0-9-_.]+$"
                                  },
                                  {
                                    "type": "integer",
                                    "minimum": 1
                                  }
                                ]
                              },
                              "verify": {
                                "type": "boolean",
                                "default": false,
                                "description": "Turn on server certificate verification, currently only kafka upstream is supported"
                              }
                            }
                          },
                          "checks": {
                            "type": "object",
                            "anyOf": [
                              {
                                "required": [
                                  "active"
                                ]
                              },
                              {
                                "required": [
                                  "active",
                                  "passive"
                                ]
                              }
                            ],
                            "properties": {
                              "active": {
                                "type": "object",
                                "properties": {
                                  "timeout": {
                                    "type": "number",
                                    "default": 1
                                  },
                                  "healthy": {
                                    "type": "object",
                                    "properties": {
                                      "interval": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "default": 1
                                      },
                                      "http_statuses": {
                                        "uniqueItems": true,
                                        "type": "array",
                                        "default": [
                                          200,
                                          302
                                        ],
                                        "minItems": 1,
                                        "items": {
                                          "type": "integer",
                                          "maximum": 599,
                                          "minimum": 200
                                        }
                                      },
                                      "successes": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 254,
                                        "default": 2
                                      }
                                    }
                                  },
                                  "concurrency": {
                                    "type": "integer",
                                    "default": 10
                                  },
                                  "host": {
                                    "type": "string",
                                    "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                                  },
                                  "https_verify_certificate": {
                                    "type": "boolean",
                                    "default": true
                                  },
                                  "port": {
                                    "type": "integer",
                                    "maximum": 65535,
                                    "minimum": 1
                                  },
                                  "type": {
                                    "type": "string",
                                    "default": "http",
                                    "enum": [
                                      "http",
                                      "https",
                                      "tcp"
                                    ]
                                  },
                                  "http_path": {
                                    "type": "string",
                                    "default": "/"
                                  },
                                  "unhealthy": {
                                    "type": "object",
                                    "properties": {
                                      "interval": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "default": 1
                                      },
                                      "http_failures": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 254,
                                        "default": 5
                                      },
                                      "tcp_failures": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 254,
                                        "default": 2
                                      },
                                      "http_statuses": {
                                        "uniqueItems": true,
                                        "type": "array",
                                        "default": [
                                          429,
                                          404,
                                          500,
                                          501,
                                          502,
                                          503,
                                          504,
                                          505
                                        ],
                                        "minItems": 1,
                                        "items": {
                                          "type": "integer",
                                          "maximum": 599,
                                          "minimum": 200
                                        }
                                      },
                                      "timeouts": {
                                        "type": "integer",
                                        "minimum": 1,
                                        "maximum": 254,
                                        "default": 3
                                      }
                                    }
                                  },
                                  "req_headers": {
                                    "type": "array",
                                    "minItems": 1,
                                    "items": {
                                      "type": "string",
                                      "uniqueItems": true
                                    }
                                  }
                                }
                              },
                              "passive": {
                                "type": "object",
                                "properties": {
                                  "type": {
                                    "type": "string",
                                    "default": "http",
                                    "enum": [
                                      "http",
                                      "https",
                                      "tcp"
                                    ]
                                  },
                                  "unhealthy": {
                                    "type": "object",
                                    "properties": {
                                      "http_failures": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 254,
                                        "default": 5
                                      },
                                      "tcp_failures": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 254,
                                        "default": 2
                                      },
                                      "http_statuses": {
                                        "uniqueItems": true,
                                        "type": "array",
                                        "default": [
                                          429,
                                          500,
                                          503
                                        ],
                                        "minItems": 1,
                                        "items": {
                                          "type": "integer",
                                          "maximum": 599,
                                          "minimum": 200
                                        }
                                      },
                                      "timeouts": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 254,
                                        "default": 7
                                      }
                                    }
                                  },
                                  "healthy": {
                                    "type": "object",
                                    "properties": {
                                      "http_statuses": {
                                        "uniqueItems": true,
                                        "type": "array",
                                        "default": [
                                          200,
                                          201,
                                          202,
                                          203,
                                          204,
                                          205,
                                          206,
                                          207,
                                          208,
                                          226,
                                          300,
                                          301,
                                          302,
                                          303,
                                          304,
                                          305,
                                          306,
                                          307,
                                          308
                                        ],
                                        "minItems": 1,
                                        "items": {
                                          "type": "integer",
                                          "maximum": 599,
                                          "minimum": 200
                                        }
                                      },
                                      "successes": {
                                        "type": "integer",
                                        "minimum": 0,
                                        "maximum": 254,
                                        "default": 5
                                      }
                                    }
                                  }
                                }
                              }
                            }
                          },
                          "hash_on": {
                            "type": "string",
                            "enum": [
                              "vars",
                              "header",
                              "cookie",
                              "consumer",
                              "vars_combinations"
                            ],
                            "default": "vars"
                          },
                          "nodes": {
                            "anyOf": [
                              {
                                "type": "object",
                                "patternProperties": {
                                  ".*": {
                                    "type": "integer",
                                    "minimum": 0,
                                    "description": "weight of node"
                                  }
                                }
                              },
                              {
                                "type": "array",
                                "items": {
                                  "type": "object",
                                  "required": [
                                    "host",
                                    "port",
                                    "weight"
                                  ],
                                  "properties": {
                                    "host": {
                                      "type": "string",
                                      "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                                    },
                                    "priority": {
                                      "type": "integer",
                                      "default": 0,
                                      "description": "priority of node"
                                    },
                                    "metadata": {
                                      "type": "object",
                                      "description": "metadata of node"
                                    },
                                    "weight": {
                                      "type": "integer",
                                      "minimum": 0,
                                      "description": "weight of node"
                                    },
                                    "port": {
                                      "type": "integer",
                                      "minimum": 1,
                                      "description": "port of node"
                                    }
                                  }
                                }
                              }
                            ]
                          },
                          "id": {
                            "anyOf": [
                              {
                                "type": "string",
                                "minLength": 1,
                                "maxLength": 64,
                                "pattern": "^[a-zA-Z0-9-_.]+$"
                              },
                              {
                                "type": "integer",
                                "minimum": 1
                              }
                            ]
                          },
                          "desc": {
                            "type": "string",
                            "maxLength": 256
                          },
                          "name": {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 100
                          },
                          "retry_timeout": {
                            "type": "number",
                            "minimum": 0
                          },
                          "keepalive_pool": {
                            "type": "object",
                            "properties": {
                              "idle_timeout": {
                                "type": "number",
                                "minimum": 0,
                                "default": 60
                              },
                              "requests": {
                                "type": "integer",
                                "minimum": 1,
                                "default": 1000
                              },
                              "size": {
                                "type": "integer",
                                "minimum": 1,
                                "default": 320
                              }
                            }
                          },
                          "discovery_type": {
                            "type": "string",
                            "description": "discovery type"
                          },
                          "type": {
                            "type": "string",
                            "default": "roundrobin",
                            "description": "algorithms of load balancing"
                          },
                          "discovery_args": {
                            "type": "object",
                            "properties": {
                              "group_name": {
                                "type": "string",
                                "description": "group name"
                              },
                              "namespace_id": {
                                "type": "string",
                                "description": "namespace id"
                              }
                            }
                          },
                          "retries": {
                            "type": "integer",
                            "minimum": 0
                          }
                        }
                      },
                      "weight": {
                        "type": "integer",
                        "minimum": 0,
                        "default": 1,
                        "description": "used to split traffic between differentupstreams for plugin configuration"
                      },
                      "upstream_id": {
                        "anyOf": [
                          {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 64,
                            "pattern": "^[a-zA-Z0-9-_.]+$"
                          },
                          {
                            "type": "integer",
                            "minimum": 1
                          }
                        ]
                      }
                    }
                  },
                  "minItems": 1,
                  "maxItems": 20
                }
              }
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "priority": 966
    },
    "proxy-rewrite": {
      "version": 0.1,
      "priority": 1008,
      "schema": {
        "type": "object",
        "minProperties": 1,
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "host": {
            "type": "string",
            "pattern": "^[0-9a-zA-Z-.]+(:\\d{1,5})?$",
            "description": "new host for upstream"
          },
          "method": {
            "type": "string",
            "enum": [
              "OPTIONS",
              "PROPFIND",
              "LOCK",
              "UNLOCK",
              "PATCH",
              "TRACE",
              "GET",
              "HEAD",
              "POST",
              "PUT",
              "DELETE",
              "MKCOL",
              "COPY",
              "MOVE"
            ],
            "description": "proxy route method"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "use_real_request_uri_unsafe": {
            "type": "boolean",
            "default": false,
            "description": "use real_request_uri instead, THIS IS VERY UNSAFE."
          },
          "headers": {
            "oneOf": [
              {
                "type": "object",
                "properties": {
                  "set": {
                    "type": "object",
                    "minProperties": 1,
                    "patternProperties": {
                      "^[^:]+$": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      }
                    }
                  },
                  "remove": {
                    "type": "array",
                    "minItems": 1,
                    "items": {
                      "type": "string",
                      "pattern": "^[^:]+$"
                    }
                  },
                  "add": {
                    "type": "object",
                    "minProperties": 1,
                    "patternProperties": {
                      "^[^:]+$": {
                        "oneOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "number"
                          }
                        ]
                      }
                    }
                  }
                },
                "additionalProperties": false,
                "minProperties": 1
              },
              {
                "type": "object",
                "minProperties": 1,
                "patternProperties": {
                  "^[^:]+$": {
                    "oneOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "number"
                      }
                    ]
                  }
                }
              }
            ],
            "description": "new headers for request"
          },
          "uri": {
            "minLength": 1,
            "maxLength": 4096,
            "type": "string",
            "pattern": "^\\/.*",
            "description": "new uri for upstream"
          },
          "regex_uri": {
            "items": {
              "type": "string",
              "description": "regex uri"
            },
            "type": "array",
            "description": "new uri that substitute from client uri for upstream, lower priority than uri property",
            "minItems": 2,
            "maxItems": 2
          }
        }
      }
    },
    "limit-req": {
      "version": 0.1,
      "schema": {
        "properties": {
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "maximum": 599,
            "default": 503
          },
          "rejected_msg": {
            "type": "string",
            "minLength": 1
          },
          "burst": {
            "type": "number",
            "minimum": 0
          },
          "key_type": {
            "type": "string",
            "default": "var",
            "enum": [
              "var",
              "var_combination"
            ]
          },
          "rate": {
            "type": "number",
            "exclusiveMinimum": 0
          },
          "key": {
            "type": "string"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allow_degradation": {
            "type": "boolean",
            "default": false
          },
          "nodelay": {
            "type": "boolean",
            "default": false
          }
        },
        "$comment": "this is a mark for our injected plugin schema",
        "type": "object",
        "required": [
          "rate",
          "burst",
          "key"
        ]
      },
      "priority": 1001
    },
    "referer-restriction": {
      "version": 0.1,
      "schema": {
        "properties": {
          "bypass_missing": {
            "type": "boolean",
            "default": false
          },
          "whitelist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "blacklist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
            }
          },
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 1024,
            "default": "Your referer host is not allowed"
          }
        },
        "oneOf": [
          {
            "required": [
              "whitelist"
            ]
          },
          {
            "required": [
              "blacklist"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "type": "object"
      },
      "priority": 2990
    },
    "ip-restriction": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "oneOf": [
          {
            "required": [
              "whitelist"
            ]
          },
          {
            "required": [
              "blacklist"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 1024,
            "default": "Your IP address is not allowed"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "whitelist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "anyOf": [
                {
                  "type": "string",
                  "title": "IPv4",
                  "format": "ipv4"
                },
                {
                  "type": "string",
                  "title": "IPv4/CIDR",
                  "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
                },
                {
                  "type": "string",
                  "title": "IPv6",
                  "format": "ipv6"
                },
                {
                  "type": "string",
                  "title": "IPv6/CIDR",
                  "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
                }
              ]
            }
          },
          "blacklist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "anyOf": [
                {
                  "type": "string",
                  "title": "IPv4",
                  "format": "ipv4"
                },
                {
                  "type": "string",
                  "title": "IPv4/CIDR",
                  "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
                },
                {
                  "type": "string",
                  "title": "IPv6",
                  "format": "ipv6"
                },
                {
                  "type": "string",
                  "title": "IPv6/CIDR",
                  "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
                }
              ]
            }
          }
        }
      },
      "priority": 3000
    },
    "grpc-transcode": {
      "version": 0.1,
      "priority": 506,
      "schema": {
        "properties": {
          "service": {
            "type": "string",
            "description": "the grpc service name"
          },
          "status_detail_type": {
            "type": "string",
            "description": "the message type of the grpc-status-details-bin's details part, if not given, the details part will not be decoded"
          },
          "method": {
            "type": "string",
            "description": "the method name in the grpc service."
          },
          "show_status_in_body": {
            "type": "boolean",
            "default": false,
            "description": "show decoded grpc-status-details-bin in response body"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "proto_id": {
            "anyOf": [
              {
                "type": "string",
                "minLength": 1,
                "maxLength": 64,
                "pattern": "^[a-zA-Z0-9-_.]+$"
              },
              {
                "type": "integer",
                "minimum": 1
              }
            ]
          },
          "pb_option": {
            "type": "array",
            "items": {
              "type": "string",
              "anyOf": [
                {
                  "type": "string",
                  "enum": [
                    "int64_as_number",
                    "int64_as_string",
                    "int64_as_hexstring"
                  ],
                  "description": "enum as result"
                },
                {
                  "type": "string",
                  "enum": [
                    "enum_as_name",
                    "enum_as_value"
                  ],
                  "description": "int64 as result"
                },
                {
                  "type": "string",
                  "enum": [
                    "auto_default_values",
                    "no_default_values",
                    "use_default_values",
                    "use_default_metatable"
                  ],
                  "description": "default values option"
                },
                {
                  "type": "string",
                  "enum": [
                    "enable_hooks",
                    "disable_hooks"
                  ],
                  "description": "hooks option"
                }
              ]
            },
            "minItems": 1,
            "default": [
              "enum_as_name",
              "int64_as_number",
              "auto_default_values",
              "disable_hooks"
            ]
          },
          "deadline": {
            "type": "number",
            "default": 0,
            "description": "deadline for grpc, millisecond"
          }
        },
        "required": [
          "proto_id",
          "service",
          "method"
        ],
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "additionalProperties": true
      }
    },
    "sls-logger": {
      "version": 0.1,
      "priority": 406,
      "schema": {
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5000
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "name": {
            "type": "string",
            "default": "sls-logger"
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "host": {
            "type": "string"
          },
          "access_key_secret": {
            "type": "string"
          },
          "port": {
            "type": "integer"
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "project": {
            "type": "string"
          },
          "logstore": {
            "type": "string"
          },
          "access_key_id": {
            "type": "string"
          }
        },
        "required": [
          "host",
          "port",
          "project",
          "logstore",
          "access_key_id",
          "access_key_secret"
        ],
        "type": "object",
        "encrypt_fields": [
          "access_key_secret"
        ],
        "$comment": "this is a mark for our injected plugin schema"
      }
    },
    "clickhouse-logger": {
      "priority": 398,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 3
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "user": {
            "type": "string",
            "default": ""
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "password": {
            "type": "string",
            "default": ""
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "ssl_verify": {
            "type": "boolean",
            "default": true
          },
          "include_req_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          },
          "name": {
            "type": "string",
            "default": "clickhouse-logger"
          },
          "endpoint_addr": {
            "type": "string",
            "pattern": "^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "database": {
            "type": "string",
            "default": ""
          },
          "endpoint_addrs": {
            "items": {
              "type": "string",
              "pattern": "^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"
            },
            "minItems": 1,
            "type": "array"
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "include_resp_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          },
          "include_resp_body": {
            "type": "boolean",
            "default": false
          },
          "logtable": {
            "type": "string",
            "default": ""
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          }
        },
        "oneOf": [
          {
            "required": [
              "endpoint_addr",
              "user",
              "password",
              "database",
              "logtable"
            ]
          },
          {
            "required": [
              "endpoint_addrs",
              "user",
              "password",
              "database",
              "logtable"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "type": "object",
        "encrypt_fields": [
          "password"
        ]
      }
    },
    "hmac-auth": {
      "consumer_schema": {
        "properties": {
          "access_key": {
            "type": "string",
            "minLength": 1,
            "maxLength": 256
          },
          "secret_key": {
            "type": "string",
            "minLength": 1,
            "maxLength": 256
          },
          "algorithm": {
            "type": "string",
            "default": "hmac-sha256",
            "enum": [
              "hmac-sha1",
              "hmac-sha256",
              "hmac-sha512"
            ]
          },
          "clock_skew": {
            "type": "integer",
            "default": 0
          },
          "signed_headers": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 50
            }
          },
          "keep_headers": {
            "type": "boolean",
            "title": "whether to keep the http request header",
            "default": false
          },
          "encode_uri_params": {
            "type": "boolean",
            "title": "Whether to escape the uri parameter",
            "default": true
          },
          "validate_request_body": {
            "type": "boolean",
            "title": "A boolean value telling the plugin to enable body validation",
            "default": false
          },
          "max_req_body": {
            "type": "integer",
            "title": "Max request body size",
            "default": 524288
          }
        },
        "title": "work with consumer object",
        "required": [
          "access_key",
          "secret_key"
        ],
        "type": "object",
        "encrypt_fields": [
          "secret_key"
        ]
      },
      "schema": {
        "type": "object",
        "title": "work with route or service object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "type": "auth",
      "version": 0.1,
      "priority": 2530
    },
    "batch-requests": {
      "scope": "global",
      "metadata_schema": {
        "type": "object",
        "properties": {
          "max_body_size": {
            "type": "integer",
            "default": 1048576,
            "exclusiveMinimum": 0,
            "description": "max pipeline body size in bytes"
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      },
      "version": 0.1,
      "priority": 4010
    },
    "openid-connect": {
      "version": 0.2,
      "priority": 2599,
      "schema": {
        "properties": {
          "timeout": {
            "type": "integer",
            "description": "timeout in seconds",
            "minimum": 1,
            "default": 3
          },
          "set_access_token_header": {
            "type": "boolean",
            "default": true,
            "description": "Whether the access token should be added as a header to the request for downstream"
          },
          "client_id": {
            "type": "string"
          },
          "scope": {
            "type": "string",
            "default": "openid"
          },
          "client_secret": {
            "type": "string"
          },
          "set_userinfo_header": {
            "type": "boolean",
            "default": true,
            "description": "Whether the user info token should be added in the X-Userinfo header to the request for downstream."
          },
          "ssl_verify": {
            "type": "boolean",
            "default": false
          },
          "introspection_endpoint_auth_method": {
            "type": "string",
            "default": "client_secret_basic"
          },
          "bearer_only": {
            "type": "boolean",
            "default": false
          },
          "session": {
            "type": "object",
            "additionalProperties": false,
            "required": [
              "secret"
            ],
            "properties": {
              "secret": {
                "type": "string",
                "minLength": 16,
                "description": "the key used for the encrypt and HMAC calculation"
              }
            }
          },
          "discovery": {
            "type": "string"
          },
          "realm": {
            "type": "string",
            "default": "apisix"
          },
          "logout_path": {
            "type": "string",
            "default": "/logout"
          },
          "set_refresh_token_header": {
            "type": "boolean",
            "default": false,
            "description": "Whether the refresh token should be added in the X-Refresh-Token header to the request for downstream."
          },
          "redirect_uri": {
            "type": "string",
            "description": "use ngx.var.request_uri if not configured"
          },
          "set_id_token_header": {
            "type": "boolean",
            "default": true,
            "description": "Whether the ID token should be added in the X-ID-Token header to the request for downstream."
          },
          "post_logout_redirect_uri": {
            "type": "string",
            "description": "the URI will be redirect when request logout_path"
          },
          "access_token_in_authorization_header": {
            "type": "boolean",
            "default": false,
            "description": "Whether the access token should be added in the Authorization header as opposed to the X-Access-Token header."
          },
          "unauth_action": {
            "type": "string",
            "description": "The action performed when client is not authorized. Use auth to redirect user to identity provider, deny to respond with 401 Unauthorized, and pass to allow the request regardless.",
            "enum": [
              "auth",
              "deny",
              "pass"
            ],
            "default": "auth"
          },
          "use_pkce": {
            "type": "boolean",
            "default": false,
            "description": "when set to true the PKEC(Proof Key for Code Exchange) will be used."
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "introspection_endpoint": {
            "type": "string"
          },
          "public_key": {
            "type": "string"
          },
          "token_signing_alg_values_expected": {
            "type": "string"
          }
        },
        "required": [
          "client_id",
          "client_secret",
          "discovery"
        ],
        "type": "object",
        "encrypt_fields": [
          "client_secret"
        ],
        "$comment": "this is a mark for our injected plugin schema"
      }
    },
    "jwt-auth": {
      "consumer_schema": {
        "properties": {
          "secret": {
            "type": "string"
          },
          "algorithm": {
            "type": "string",
            "default": "HS256",
            "enum": [
              "HS256",
              "HS512",
              "RS256",
              "ES256"
            ]
          },
          "key": {
            "type": "string"
          },
          "lifetime_grace_period": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "base64_secret": {
            "type": "boolean",
            "default": false
          },
          "exp": {
            "type": "integer",
            "minimum": 1,
            "default": 86400
          }
        },
        "required": [
          "key"
        ],
        "type": "object",
        "encrypt_fields": [
          "secret",
          "private_key"
        ],
        "dependencies": {
          "algorithm": {
            "oneOf": [
              {
                "properties": {
                  "algorithm": {
                    "default": "HS256",
                    "enum": [
                      "HS256",
                      "HS512"
                    ]
                  }
                }
              },
              {
                "properties": {
                  "algorithm": {
                    "enum": [
                      "RS256",
                      "ES256"
                    ]
                  },
                  "public_key": {
                    "type": "string"
                  },
                  "private_key": {
                    "type": "string"
                  }
                },
                "required": [
                  "public_key",
                  "private_key"
                ]
              }
            ]
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "query": {
            "type": "string",
            "default": "jwt"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "cookie": {
            "type": "string",
            "default": "jwt"
          },
          "header": {
            "type": "string",
            "default": "authorization"
          },
          "hide_credentials": {
            "type": "boolean",
            "default": false
          }
        }
      },
      "type": "auth",
      "version": 0.1,
      "priority": 2510
    },
    "consumer-restriction": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "anyOf": [
          {
            "required": [
              "blacklist"
            ]
          },
          {
            "required": [
              "whitelist"
            ]
          },
          {
            "required": [
              "allowed_by_methods"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "blacklist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "rejected_msg": {
            "type": "string"
          },
          "whitelist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string"
            }
          },
          "type": {
            "type": "string",
            "default": "consumer_name",
            "enum": [
              "consumer_name",
              "service_id",
              "route_id",
              "consumer_group_id"
            ]
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allowed_by_methods": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "methods": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "string",
                    "enum": [
                      "GET",
                      "POST",
                      "PUT",
                      "DELETE",
                      "PATCH",
                      "HEAD",
                      "OPTIONS",
                      "CONNECT",
                      "TRACE",
                      "PURGE"
                    ],
                    "description": "HTTP method"
                  }
                },
                "user": {
                  "type": "string"
                }
              }
            }
          },
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "default": 403
          }
        }
      },
      "priority": 2400
    },
    "uri-blocker": {
      "version": 0.1,
      "priority": 2900,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "block_rules"
        ],
        "properties": {
          "rejected_code": {
            "type": "integer",
            "minimum": 200,
            "default": 403
          },
          "rejected_msg": {
            "type": "string",
            "minLength": 1
          },
          "block_rules": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 4096
            },
            "uniqueItems": true
          },
          "case_insensitive": {
            "type": "boolean",
            "default": false
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "http-logger": {
      "priority": 410,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "uri"
        ],
        "properties": {
          "timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 3
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "concat_method": {
            "type": "string",
            "enum": [
              "json",
              "new_line"
            ],
            "default": "json"
          },
          "name": {
            "type": "string",
            "default": "http logger"
          },
          "retry_delay": {
            "type": "integer",
            "minimum": 0,
            "default": 1
          },
          "batch_max_size": {
            "type": "integer",
            "minimum": 1,
            "default": 1000
          },
          "log_format": {
            "type": "object"
          },
          "include_req_body": {
            "type": "boolean",
            "default": false
          },
          "max_retry_count": {
            "type": "integer",
            "minimum": 0,
            "default": 0
          },
          "buffer_duration": {
            "type": "integer",
            "minimum": 1,
            "default": 60
          },
          "ssl_verify": {
            "type": "boolean",
            "default": false
          },
          "inactive_timeout": {
            "type": "integer",
            "minimum": 1,
            "default": 5
          },
          "include_resp_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          },
          "include_resp_body": {
            "type": "boolean",
            "default": false
          },
          "auth_header": {
            "type": "string"
          },
          "uri": {
            "type": "string",
            "pattern": "^[^\\/]+:\\/\\/([\\da-zA-Z.-]+|\\[[\\da-fA-F:]+\\])(:\\d+)?"
          }
        }
      }
    },
    "ua-restriction": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "bypass_missing": {
            "type": "boolean",
            "default": false
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allowlist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "denylist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "minLength": 1
            }
          },
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 1024,
            "default": "Not allowed"
          }
        }
      },
      "priority": 2999
    },
    "redirect": {
      "version": 0.1,
      "priority": 900,
      "schema": {
        "type": "object",
        "oneOf": [
          {
            "required": [
              "uri"
            ]
          },
          {
            "required": [
              "regex_uri"
            ]
          },
          {
            "required": [
              "http_to_https"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "uri": {
            "type": "string",
            "minLength": 2,
            "pattern": "(\\\\\\$[0-9a-zA-Z_]+)|\\$\\{([0-9a-zA-Z_]+)\\}|\\$([0-9a-zA-Z_]+)|(\\$|[^$\\\\]+)"
          },
          "http_to_https": {
            "type": "boolean"
          },
          "encode_uri": {
            "type": "boolean",
            "default": false
          },
          "append_query_string": {
            "type": "boolean",
            "default": false
          },
          "ret_code": {
            "type": "integer",
            "minimum": 200,
            "default": 302
          },
          "regex_uri": {
            "items": {
              "type": "string",
              "description": "regex uri"
            },
            "type": "array",
            "description": "params for generating new uri that substitute from client uri, first param is regular expression, the second one is uri template",
            "minItems": 2,
            "maxItems": 2
          }
        }
      }
    },
    "grpc-web": {
      "version": 0.1,
      "priority": 505,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    },
    "zipkin": {
      "version": 0.1,
      "priority": 12011,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "endpoint",
          "sample_ratio"
        ],
        "properties": {
          "service_name": {
            "type": "string",
            "default": "APISIX",
            "description": "service name for zipkin reporter"
          },
          "server_addr": {
            "type": "string",
            "pattern": "^[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}$",
            "description": "default is $server_addr, you can specify your external ip address"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "endpoint": {
            "type": "string"
          },
          "span_version": {
            "default": 2,
            "enum": [
              1,
              2
            ]
          },
          "sample_ratio": {
            "type": "number",
            "maximum": 1,
            "minimum": 0.00001
          }
        }
      }
    },
    "proxy-cache": {
      "version": 0.2,
      "priority": 1009,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "no_cache": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"
            }
          },
          "cache_ttl": {
            "type": "integer",
            "minimum": 1,
            "default": 300
          },
          "cache_zone": {
            "type": "string",
            "minLength": 1,
            "maxLength": 100,
            "default": "disk_cache_one"
          },
          "cache_strategy": {
            "type": "string",
            "default": "disk",
            "enum": [
              "disk",
              "memory"
            ]
          },
          "cache_http_status": {
            "uniqueItems": true,
            "type": "array",
            "default": [
              200,
              301,
              404
            ],
            "minItems": 1,
            "items": {
              "type": "integer",
              "minimum": 200,
              "maximum": 599,
              "description": "http response status"
            }
          },
          "cache_control": {
            "type": "boolean",
            "default": false
          },
          "cache_method": {
            "uniqueItems": true,
            "type": "array",
            "default": [
              "GET",
              "HEAD"
            ],
            "minItems": 1,
            "items": {
              "type": "string",
              "enum": [
                "GET",
                "POST",
                "HEAD"
              ],
              "description": "supported http method"
            }
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "hide_cache_headers": {
            "type": "boolean",
            "default": false
          },
          "cache_key": {
            "type": "array",
            "items": {
              "type": "string",
              "pattern": "(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)",
              "description": "a key for caching"
            },
            "minItems": 1,
            "default": [
              "$host",
              "$request_uri"
            ]
          },
          "cache_bypass": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "string",
              "pattern": "(^[^\\$].+$|^\\$[0-9a-zA-Z_]+$)"
            }
          }
        }
      }
    },
    "key-auth": {
      "consumer_schema": {
        "properties": {
          "key": {
            "type": "string"
          }
        },
        "required": [
          "key"
        ],
        "type": "object",
        "encrypt_fields": [
          "key"
        ]
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "query": {
            "type": "string",
            "default": "apikey"
          },
          "hide_credentials": {
            "type": "boolean",
            "default": false
          },
          "header": {
            "type": "string",
            "default": "apikey"
          }
        }
      },
      "type": "auth",
      "version": 0.1,
      "priority": 2500
    },
    "wolf-rbac": {
      "type": "auth",
      "version": 0.1,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "appid": {
            "type": "string",
            "default": "unset"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "server": {
            "type": "string",
            "default": "http://127.0.0.1:12180"
          },
          "header_prefix": {
            "type": "string",
            "default": "X-"
          }
        }
      },
      "priority": 2555
    },
    "file-logger": {
      "priority": 399,
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "log_format": {
            "type": "object",
            "default": {
              "host": "$host",
              "client_ip": "$remote_addr",
              "@timestamp": "$time_iso8601"
            }
          }
        }
      },
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "path"
        ],
        "properties": {
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "path": {
            "type": "string"
          },
          "include_resp_body": {
            "type": "boolean",
            "default": false
          },
          "log_format": {
            "type": "object"
          },
          "include_resp_body_expr": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "array"
            }
          }
        }
      }
    },
    "cors": {
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "allow_origins_by_metadata": {
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 4096
            },
            "minItems": 1,
            "description": "set allowed origins by referencing origins in plugin metadata"
          },
          "allow_headers": {
            "type": "string",
            "default": "*",
            "description": "you can use '*' to allow all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."
          },
          "allow_methods": {
            "type": "string",
            "default": "*",
            "description": "you can use '*' to allow all methods when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple method use ',' to split. default: *."
          },
          "allow_origins": {
            "type": "string",
            "default": "*",
            "pattern": "^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$",
            "description": "you can use '*' to allow all origins when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple origin use ',' to split. default: *."
          },
          "expose_headers": {
            "type": "string",
            "default": "*",
            "description": "you can use '*' to expose all header when no credentials,'**' to allow forcefully(it will bring some security risks, be carefully),multiple header use ',' to split. default: *."
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "allow_origins_by_regex": {
            "uniqueItems": true,
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1,
              "maxLength": 4096
            },
            "minItems": 1,
            "description": "you can use regex to allow specific origins when no credentials,for example use [.*\\.test.com] to allow a.test.com and b.test.com"
          },
          "max_age": {
            "type": "integer",
            "default": 5,
            "description": "maximum number of seconds the results can be cached.-1 means no cached, the max value is depend on browser,more details plz check MDN. default: 5."
          },
          "allow_credential": {
            "type": "boolean",
            "default": false,
            "description": "allow client append credential. according to CORS specification,if you set this option to 'true', you can not use '*' for other options."
          }
        }
      },
      "version": 0.1,
      "metadata_schema": {
        "type": "object",
        "properties": {
          "allow_origins": {
            "type": "object",
            "additionalProperties": {
              "type": "string",
              "pattern": "^(\\*|\\*\\*|null|\\w+://[^,]+(,\\w+://[^,]+)*)$"
            }
          }
        }
      },
      "priority": 4000
    },
    "echo": {
      "version": 0.1,
      "schema": {
        "properties": {
          "body": {
            "type": "string",
            "description": "body to replace upstream response."
          },
          "headers": {
            "type": "object",
            "minProperties": 1,
            "description": "new headers for response"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "before_body": {
            "type": "string",
            "description": "body before the filter phase."
          },
          "after_body": {
            "type": "string",
            "description": "body after the modification of filter phase."
          }
        },
        "$comment": "this is a mark for our injected plugin schema",
        "type": "object",
        "anyOf": [
          {
            "required": [
              "before_body"
            ]
          },
          {
            "required": [
              "body"
            ]
          },
          {
            "required": [
              "after_body"
            ]
          }
        ],
        "minProperties": 1
      },
      "priority": 412
    }
  },
  "stream_plugins": {
    "ip-restriction": {
      "version": 0.1,
      "schema": {
        "type": "object",
        "oneOf": [
          {
            "required": [
              "whitelist"
            ]
          },
          {
            "required": [
              "blacklist"
            ]
          }
        ],
        "$comment": "this is a mark for our injected plugin schema",
        "properties": {
          "message": {
            "type": "string",
            "minLength": 1,
            "maxLength": 1024,
            "default": "Your IP address is not allowed"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "whitelist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "anyOf": [
                {
                  "type": "string",
                  "title": "IPv4",
                  "format": "ipv4"
                },
                {
                  "type": "string",
                  "title": "IPv4/CIDR",
                  "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
                },
                {
                  "type": "string",
                  "title": "IPv6",
                  "format": "ipv6"
                },
                {
                  "type": "string",
                  "title": "IPv6/CIDR",
                  "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
                }
              ]
            }
          },
          "blacklist": {
            "type": "array",
            "minItems": 1,
            "items": {
              "anyOf": [
                {
                  "type": "string",
                  "title": "IPv4",
                  "format": "ipv4"
                },
                {
                  "type": "string",
                  "title": "IPv4/CIDR",
                  "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
                },
                {
                  "type": "string",
                  "title": "IPv6",
                  "format": "ipv6"
                },
                {
                  "type": "string",
                  "title": "IPv6/CIDR",
                  "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
                }
              ]
            }
          }
        }
      },
      "priority": 3000
    },
    "limit-conn": {
      "version": 0.1,
      "priority": 1003,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "conn",
          "burst",
          "default_conn_delay",
          "key"
        ],
        "properties": {
          "only_use_default_delay": {
            "type": "boolean",
            "default": false
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          },
          "conn": {
            "type": "integer",
            "exclusiveMinimum": 0
          },
          "key": {
            "type": "string"
          },
          "key_type": {
            "type": "string",
            "default": "var",
            "enum": [
              "var",
              "var_combination"
            ]
          },
          "burst": {
            "type": "integer",
            "minimum": 0
          },
          "default_conn_delay": {
            "type": "number",
            "exclusiveMinimum": 0
          }
        }
      }
    },
    "mqtt-proxy": {
      "version": 0.1,
      "priority": 1000,
      "schema": {
        "type": "object",
        "$comment": "this is a mark for our injected plugin schema",
        "required": [
          "protocol_name",
          "protocol_level"
        ],
        "properties": {
          "protocol_name": {
            "type": "string"
          },
          "protocol_level": {
            "type": "integer"
          },
          "_meta": {
            "type": "object",
            "properties": {
              "filter": {
                "type": "array",
                "description": "filter determines whether the plugin needs to be executed at runtime"
              },
              "error_response": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object"
                  }
                ]
              },
              "priority": {
                "type": "integer",
                "description": "priority of plugins by customized order"
              },
              "disable": {
                "type": "boolean"
              }
            }
          }
        }
      }
    }
  },
  "main": {
    "ssl": {
      "then": {
        "oneOf": [
          {
            "required": [
              "sni",
              "key",
              "cert"
            ]
          },
          {
            "required": [
              "snis",
              "key",
              "cert"
            ]
          }
        ]
      },
      "else": {
        "required": [
          "key",
          "cert"
        ]
      },
      "type": "object",
      "properties": {
        "validity_end": {
          "type": "integer"
        },
        "validity_start": {
          "type": "integer"
        },
        "status": {
          "type": "integer",
          "default": 1,
          "enum": [
            1,
            0
          ],
          "description": "ssl status, 1 to enable, 0 to disable"
        },
        "create_time": {
          "type": "integer"
        },
        "update_time": {
          "type": "integer"
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "exptime": {
          "type": "integer",
          "minimum": 1588262400
        },
        "cert": {
          "type": "string",
          "minLength": 128,
          "maxLength": 65536
        },
        "key": {
          "type": "string",
          "minLength": 128,
          "maxLength": 65536
        },
        "keys": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 128,
            "maxLength": 65536
          }
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "certs": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 128,
            "maxLength": 65536
          }
        },
        "type": {
          "type": "string",
          "enum": [
            "server",
            "client"
          ],
          "default": "server",
          "description": "ssl certificate type, server to server certificate, client to client certificate for upstream"
        },
        "snis": {
          "type": "array",
          "minItems": 1,
          "items": {
            "type": "string",
            "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
          }
        },
        "client": {
          "type": "object",
          "required": [
            "ca"
          ],
          "properties": {
            "ca": {
              "type": "string",
              "minLength": 128,
              "maxLength": 65536
            },
            "depth": {
              "type": "integer",
              "minimum": 0,
              "default": 1
            }
          }
        },
        "sni": {
          "type": "string",
          "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
        }
      },
      "if": {
        "properties": {
          "type": {
            "enum": [
              "server"
            ]
          }
        }
      }
    },
    "global_rule": {
      "type": "object",
      "required": [
        "plugins"
      ],
      "properties": {
        "plugins": {
          "type": "object"
        },
        "update_time": {
          "type": "integer"
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "create_time": {
          "type": "integer"
        }
      }
    },
    "route": {
      "properties": {
        "timeout": {
          "type": "object",
          "required": [
            "connect",
            "send",
            "read"
          ],
          "properties": {
            "read": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "send": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "connect": {
              "type": "number",
              "exclusiveMinimum": 0
            }
          }
        },
        "service_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "update_time": {
          "type": "integer"
        },
        "enable_websocket": {
          "type": "boolean",
          "description": "enable websocket for request"
        },
        "upstream_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "host": {
          "type": "string",
          "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
        },
        "create_time": {
          "type": "integer"
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "uris": {
          "type": "array",
          "items": {
            "type": "string",
            "description": "HTTP uri"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "uri": {
          "type": "string",
          "minLength": 1,
          "maxLength": 4096
        },
        "methods": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "GET",
              "POST",
              "PUT",
              "DELETE",
              "PATCH",
              "HEAD",
              "OPTIONS",
              "CONNECT",
              "TRACE",
              "PURGE"
            ],
            "description": "HTTP method"
          },
          "uniqueItems": true
        },
        "hosts": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "remote_addrs": {
          "type": "array",
          "items": {
            "type": "string",
            "anyOf": [
              {
                "type": "string",
                "title": "IPv4",
                "format": "ipv4"
              },
              {
                "type": "string",
                "title": "IPv4/CIDR",
                "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
              },
              {
                "type": "string",
                "title": "IPv6",
                "format": "ipv6"
              },
              {
                "type": "string",
                "title": "IPv6/CIDR",
                "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
              }
            ],
            "description": "client IP"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "priority": {
          "type": "integer",
          "default": 0
        },
        "vars": {
          "type": "array"
        },
        "script_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "status": {
          "type": "integer",
          "default": 1,
          "enum": [
            1,
            0
          ],
          "description": "route status, 1 to enable, 0 to disable"
        },
        "remote_addr": {
          "type": "string",
          "anyOf": [
            {
              "type": "string",
              "title": "IPv4",
              "format": "ipv4"
            },
            {
              "type": "string",
              "title": "IPv4/CIDR",
              "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
            },
            {
              "type": "string",
              "title": "IPv6",
              "format": "ipv6"
            },
            {
              "type": "string",
              "title": "IPv6/CIDR",
              "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
            }
          ],
          "description": "client IP"
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "upstream": {
          "type": "object",
          "oneOf": [
            {
              "required": [
                "nodes"
              ]
            },
            {
              "required": [
                "service_name",
                "discovery_type"
              ]
            }
          ],
          "properties": {
            "timeout": {
              "type": "object",
              "required": [
                "connect",
                "send",
                "read"
              ],
              "properties": {
                "read": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "send": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "connect": {
                  "type": "number",
                  "exclusiveMinimum": 0
                }
              }
            },
            "pass_host": {
              "type": "string",
              "default": "pass",
              "enum": [
                "pass",
                "node",
                "rewrite"
              ],
              "description": "mod of host passing"
            },
            "upstream_host": {
              "type": "string",
              "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
            },
            "update_time": {
              "type": "integer"
            },
            "scheme": {
              "description": "The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.",
              "default": "http",
              "enum": [
                "grpc",
                "grpcs",
                "http",
                "https",
                "tcp",
                "tls",
                "udp",
                "kafka"
              ]
            },
            "service_name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            "create_time": {
              "type": "integer"
            },
            "labels": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "minLength": 1,
                  "maxLength": 64,
                  "type": "string",
                  "description": "value of label",
                  "pattern": "^\\S+$"
                }
              },
              "description": "key/value pairs to specify attributes"
            },
            "key": {
              "type": "string",
              "description": "the key of chash for dynamic load balancing"
            },
            "tls": {
              "type": "object",
              "dependencies": {
                "client_cert": {
                  "required": [
                    "client_key"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_key": {
                  "required": [
                    "client_cert"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_cert_id": {
                  "not": {
                    "required": [
                      "client_client",
                      "client_key"
                    ]
                  }
                }
              },
              "properties": {
                "client_cert": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_key": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_cert_id": {
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 64,
                      "pattern": "^[a-zA-Z0-9-_.]+$"
                    },
                    {
                      "type": "integer",
                      "minimum": 1
                    }
                  ]
                },
                "verify": {
                  "type": "boolean",
                  "default": false,
                  "description": "Turn on server certificate verification, currently only kafka upstream is supported"
                }
              }
            },
            "checks": {
              "type": "object",
              "anyOf": [
                {
                  "required": [
                    "active"
                  ]
                },
                {
                  "required": [
                    "active",
                    "passive"
                  ]
                }
              ],
              "properties": {
                "active": {
                  "type": "object",
                  "properties": {
                    "timeout": {
                      "type": "number",
                      "default": 1
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            302
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        }
                      }
                    },
                    "concurrency": {
                      "type": "integer",
                      "default": 10
                    },
                    "host": {
                      "type": "string",
                      "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                    },
                    "https_verify_certificate": {
                      "type": "boolean",
                      "default": true
                    },
                    "port": {
                      "type": "integer",
                      "maximum": 65535,
                      "minimum": 1
                    },
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "http_path": {
                      "type": "string",
                      "default": "/"
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            404,
                            500,
                            501,
                            502,
                            503,
                            504,
                            505
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 3
                        }
                      }
                    },
                    "req_headers": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "string",
                        "uniqueItems": true
                      }
                    }
                  }
                },
                "passive": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "http_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            500,
                            503
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 7
                        }
                      }
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            201,
                            202,
                            203,
                            204,
                            205,
                            206,
                            207,
                            208,
                            226,
                            300,
                            301,
                            302,
                            303,
                            304,
                            305,
                            306,
                            307,
                            308
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        }
                      }
                    }
                  }
                }
              }
            },
            "hash_on": {
              "type": "string",
              "enum": [
                "vars",
                "header",
                "cookie",
                "consumer",
                "vars_combinations"
              ],
              "default": "vars"
            },
            "nodes": {
              "anyOf": [
                {
                  "type": "object",
                  "patternProperties": {
                    ".*": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "weight of node"
                    }
                  }
                },
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "host",
                      "port",
                      "weight"
                    ],
                    "properties": {
                      "host": {
                        "type": "string",
                        "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                      },
                      "priority": {
                        "type": "integer",
                        "default": 0,
                        "description": "priority of node"
                      },
                      "metadata": {
                        "type": "object",
                        "description": "metadata of node"
                      },
                      "weight": {
                        "type": "integer",
                        "minimum": 0,
                        "description": "weight of node"
                      },
                      "port": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "port of node"
                      }
                    }
                  }
                }
              ]
            },
            "id": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "pattern": "^[a-zA-Z0-9-_.]+$"
                },
                {
                  "type": "integer",
                  "minimum": 1
                }
              ]
            },
            "desc": {
              "type": "string",
              "maxLength": 256
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "retry_timeout": {
              "type": "number",
              "minimum": 0
            },
            "keepalive_pool": {
              "type": "object",
              "properties": {
                "idle_timeout": {
                  "type": "number",
                  "minimum": 0,
                  "default": 60
                },
                "requests": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 1000
                },
                "size": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 320
                }
              }
            },
            "discovery_type": {
              "type": "string",
              "description": "discovery type"
            },
            "type": {
              "type": "string",
              "default": "roundrobin",
              "description": "algorithms of load balancing"
            },
            "discovery_args": {
              "type": "object",
              "properties": {
                "group_name": {
                  "type": "string",
                  "description": "group name"
                },
                "namespace_id": {
                  "type": "string",
                  "description": "namespace id"
                }
              }
            },
            "retries": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "plugins": {
          "type": "object"
        },
        "plugin_config_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "filter_func": {
          "type": "string",
          "minLength": 10,
          "pattern": "^function"
        },
        "script": {
          "type": "string",
          "minLength": 10,
          "maxLength": 102400
        }
      },
      "allOf": [
        {
          "oneOf": [
            {
              "required": [
                "uri"
              ]
            },
            {
              "required": [
                "uris"
              ]
            }
          ]
        },
        {
          "oneOf": [
            {
              "not": {
                "anyOf": [
                  {
                    "required": [
                      "host"
                    ]
                  },
                  {
                    "required": [
                      "hosts"
                    ]
                  }
                ]
              }
            },
            {
              "required": [
                "host"
              ]
            },
            {
              "required": [
                "hosts"
              ]
            }
          ]
        },
        {
          "oneOf": [
            {
              "not": {
                "anyOf": [
                  {
                    "required": [
                      "remote_addr"
                    ]
                  },
                  {
                    "required": [
                      "remote_addrs"
                    ]
                  }
                ]
              }
            },
            {
              "required": [
                "remote_addr"
              ]
            },
            {
              "required": [
                "remote_addrs"
              ]
            }
          ]
        }
      ],
      "type": "object",
      "anyOf": [
        {
          "required": [
            "plugins",
            "uri"
          ]
        },
        {
          "required": [
            "upstream",
            "uri"
          ]
        },
        {
          "required": [
            "upstream_id",
            "uri"
          ]
        },
        {
          "required": [
            "service_id",
            "uri"
          ]
        },
        {
          "required": [
            "plugins",
            "uris"
          ]
        },
        {
          "required": [
            "upstream",
            "uris"
          ]
        },
        {
          "required": [
            "upstream_id",
            "uris"
          ]
        },
        {
          "required": [
            "service_id",
            "uris"
          ]
        },
        {
          "required": [
            "script",
            "uri"
          ]
        },
        {
          "required": [
            "script",
            "uris"
          ]
        }
      ],
      "not": {
        "anyOf": [
          {
            "required": [
              "script",
              "plugins"
            ]
          },
          {
            "required": [
              "script",
              "plugin_config_id"
            ]
          }
        ]
      }
    },
    "upstream": {
      "type": "object",
      "oneOf": [
        {
          "required": [
            "nodes"
          ]
        },
        {
          "required": [
            "service_name",
            "discovery_type"
          ]
        }
      ],
      "properties": {
        "timeout": {
          "type": "object",
          "required": [
            "connect",
            "send",
            "read"
          ],
          "properties": {
            "read": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "send": {
              "type": "number",
              "exclusiveMinimum": 0
            },
            "connect": {
              "type": "number",
              "exclusiveMinimum": 0
            }
          }
        },
        "pass_host": {
          "type": "string",
          "default": "pass",
          "enum": [
            "pass",
            "node",
            "rewrite"
          ],
          "description": "mod of host passing"
        },
        "upstream_host": {
          "type": "string",
          "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
        },
        "update_time": {
          "type": "integer"
        },
        "scheme": {
          "description": "The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.",
          "default": "http",
          "enum": [
            "grpc",
            "grpcs",
            "http",
            "https",
            "tcp",
            "tls",
            "udp",
            "kafka"
          ]
        },
        "service_name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256
        },
        "create_time": {
          "type": "integer"
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "key": {
          "type": "string",
          "description": "the key of chash for dynamic load balancing"
        },
        "tls": {
          "type": "object",
          "dependencies": {
            "client_cert": {
              "required": [
                "client_key"
              ],
              "not": {
                "required": [
                  "client_cert_id"
                ]
              }
            },
            "client_key": {
              "required": [
                "client_cert"
              ],
              "not": {
                "required": [
                  "client_cert_id"
                ]
              }
            },
            "client_cert_id": {
              "not": {
                "required": [
                  "client_client",
                  "client_key"
                ]
              }
            }
          },
          "properties": {
            "client_cert": {
              "type": "string",
              "minLength": 128,
              "maxLength": 65536
            },
            "client_key": {
              "type": "string",
              "minLength": 128,
              "maxLength": 65536
            },
            "client_cert_id": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "pattern": "^[a-zA-Z0-9-_.]+$"
                },
                {
                  "type": "integer",
                  "minimum": 1
                }
              ]
            },
            "verify": {
              "type": "boolean",
              "default": false,
              "description": "Turn on server certificate verification, currently only kafka upstream is supported"
            }
          }
        },
        "checks": {
          "type": "object",
          "anyOf": [
            {
              "required": [
                "active"
              ]
            },
            {
              "required": [
                "active",
                "passive"
              ]
            }
          ],
          "properties": {
            "active": {
              "type": "object",
              "properties": {
                "timeout": {
                  "type": "number",
                  "default": 1
                },
                "healthy": {
                  "type": "object",
                  "properties": {
                    "interval": {
                      "type": "integer",
                      "minimum": 1,
                      "default": 1
                    },
                    "http_statuses": {
                      "uniqueItems": true,
                      "type": "array",
                      "default": [
                        200,
                        302
                      ],
                      "minItems": 1,
                      "items": {
                        "type": "integer",
                        "maximum": 599,
                        "minimum": 200
                      }
                    },
                    "successes": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 254,
                      "default": 2
                    }
                  }
                },
                "concurrency": {
                  "type": "integer",
                  "default": 10
                },
                "host": {
                  "type": "string",
                  "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                },
                "https_verify_certificate": {
                  "type": "boolean",
                  "default": true
                },
                "port": {
                  "type": "integer",
                  "maximum": 65535,
                  "minimum": 1
                },
                "type": {
                  "type": "string",
                  "default": "http",
                  "enum": [
                    "http",
                    "https",
                    "tcp"
                  ]
                },
                "http_path": {
                  "type": "string",
                  "default": "/"
                },
                "unhealthy": {
                  "type": "object",
                  "properties": {
                    "interval": {
                      "type": "integer",
                      "minimum": 1,
                      "default": 1
                    },
                    "http_failures": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 254,
                      "default": 5
                    },
                    "tcp_failures": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 254,
                      "default": 2
                    },
                    "http_statuses": {
                      "uniqueItems": true,
                      "type": "array",
                      "default": [
                        429,
                        404,
                        500,
                        501,
                        502,
                        503,
                        504,
                        505
                      ],
                      "minItems": 1,
                      "items": {
                        "type": "integer",
                        "maximum": 599,
                        "minimum": 200
                      }
                    },
                    "timeouts": {
                      "type": "integer",
                      "minimum": 1,
                      "maximum": 254,
                      "default": 3
                    }
                  }
                },
                "req_headers": {
                  "type": "array",
                  "minItems": 1,
                  "items": {
                    "type": "string",
                    "uniqueItems": true
                  }
                }
              }
            },
            "passive": {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "default": "http",
                  "enum": [
                    "http",
                    "https",
                    "tcp"
                  ]
                },
                "unhealthy": {
                  "type": "object",
                  "properties": {
                    "http_failures": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 254,
                      "default": 5
                    },
                    "tcp_failures": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 254,
                      "default": 2
                    },
                    "http_statuses": {
                      "uniqueItems": true,
                      "type": "array",
                      "default": [
                        429,
                        500,
                        503
                      ],
                      "minItems": 1,
                      "items": {
                        "type": "integer",
                        "maximum": 599,
                        "minimum": 200
                      }
                    },
                    "timeouts": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 254,
                      "default": 7
                    }
                  }
                },
                "healthy": {
                  "type": "object",
                  "properties": {
                    "http_statuses": {
                      "uniqueItems": true,
                      "type": "array",
                      "default": [
                        200,
                        201,
                        202,
                        203,
                        204,
                        205,
                        206,
                        207,
                        208,
                        226,
                        300,
                        301,
                        302,
                        303,
                        304,
                        305,
                        306,
                        307,
                        308
                      ],
                      "minItems": 1,
                      "items": {
                        "type": "integer",
                        "maximum": 599,
                        "minimum": 200
                      }
                    },
                    "successes": {
                      "type": "integer",
                      "minimum": 0,
                      "maximum": 254,
                      "default": 5
                    }
                  }
                }
              }
            }
          }
        },
        "hash_on": {
          "type": "string",
          "enum": [
            "vars",
            "header",
            "cookie",
            "consumer",
            "vars_combinations"
          ],
          "default": "vars"
        },
        "nodes": {
          "anyOf": [
            {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "type": "integer",
                  "minimum": 0,
                  "description": "weight of node"
                }
              }
            },
            {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "host",
                  "port",
                  "weight"
                ],
                "properties": {
                  "host": {
                    "type": "string",
                    "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                  },
                  "priority": {
                    "type": "integer",
                    "default": 0,
                    "description": "priority of node"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "metadata of node"
                  },
                  "weight": {
                    "type": "integer",
                    "minimum": 0,
                    "description": "weight of node"
                  },
                  "port": {
                    "type": "integer",
                    "minimum": 1,
                    "description": "port of node"
                  }
                }
              }
            }
          ]
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "retry_timeout": {
          "type": "number",
          "minimum": 0
        },
        "keepalive_pool": {
          "type": "object",
          "properties": {
            "idle_timeout": {
              "type": "number",
              "minimum": 0,
              "default": 60
            },
            "requests": {
              "type": "integer",
              "minimum": 1,
              "default": 1000
            },
            "size": {
              "type": "integer",
              "minimum": 1,
              "default": 320
            }
          }
        },
        "discovery_type": {
          "type": "string",
          "description": "discovery type"
        },
        "type": {
          "type": "string",
          "default": "roundrobin",
          "description": "algorithms of load balancing"
        },
        "discovery_args": {
          "type": "object",
          "properties": {
            "group_name": {
              "type": "string",
              "description": "group name"
            },
            "namespace_id": {
              "type": "string",
              "description": "namespace id"
            }
          }
        },
        "retries": {
          "type": "integer",
          "minimum": 0
        }
      }
    },
    "proto": {
      "type": "object",
      "required": [
        "content"
      ],
      "properties": {
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "update_time": {
          "type": "integer"
        },
        "create_time": {
          "type": "integer"
        },
        "content": {
          "type": "string",
          "minLength": 1,
          "maxLength": 1048576
        }
      }
    },
    "consumer_group": {
      "type": "object",
      "required": [
        "id",
        "plugins"
      ],
      "properties": {
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "update_time": {
          "type": "integer"
        },
        "create_time": {
          "type": "integer"
        },
        "plugins": {
          "type": "object"
        }
      }
    },
    "stream_route": {
      "type": "object",
      "properties": {
        "server_addr": {
          "type": "string",
          "anyOf": [
            {
              "type": "string",
              "title": "IPv4",
              "format": "ipv4"
            },
            {
              "type": "string",
              "title": "IPv4/CIDR",
              "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
            },
            {
              "type": "string",
              "title": "IPv6",
              "format": "ipv6"
            },
            {
              "type": "string",
              "title": "IPv6/CIDR",
              "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
            }
          ],
          "description": "server IP"
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "upstream": {
          "type": "object",
          "oneOf": [
            {
              "required": [
                "nodes"
              ]
            },
            {
              "required": [
                "service_name",
                "discovery_type"
              ]
            }
          ],
          "properties": {
            "timeout": {
              "type": "object",
              "required": [
                "connect",
                "send",
                "read"
              ],
              "properties": {
                "read": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "send": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "connect": {
                  "type": "number",
                  "exclusiveMinimum": 0
                }
              }
            },
            "pass_host": {
              "type": "string",
              "default": "pass",
              "enum": [
                "pass",
                "node",
                "rewrite"
              ],
              "description": "mod of host passing"
            },
            "upstream_host": {
              "type": "string",
              "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
            },
            "update_time": {
              "type": "integer"
            },
            "scheme": {
              "description": "The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.",
              "default": "http",
              "enum": [
                "grpc",
                "grpcs",
                "http",
                "https",
                "tcp",
                "tls",
                "udp",
                "kafka"
              ]
            },
            "service_name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            "create_time": {
              "type": "integer"
            },
            "labels": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "minLength": 1,
                  "maxLength": 64,
                  "type": "string",
                  "description": "value of label",
                  "pattern": "^\\S+$"
                }
              },
              "description": "key/value pairs to specify attributes"
            },
            "key": {
              "type": "string",
              "description": "the key of chash for dynamic load balancing"
            },
            "tls": {
              "type": "object",
              "dependencies": {
                "client_cert": {
                  "required": [
                    "client_key"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_key": {
                  "required": [
                    "client_cert"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_cert_id": {
                  "not": {
                    "required": [
                      "client_client",
                      "client_key"
                    ]
                  }
                }
              },
              "properties": {
                "client_cert": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_key": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_cert_id": {
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 64,
                      "pattern": "^[a-zA-Z0-9-_.]+$"
                    },
                    {
                      "type": "integer",
                      "minimum": 1
                    }
                  ]
                },
                "verify": {
                  "type": "boolean",
                  "default": false,
                  "description": "Turn on server certificate verification, currently only kafka upstream is supported"
                }
              }
            },
            "checks": {
              "type": "object",
              "anyOf": [
                {
                  "required": [
                    "active"
                  ]
                },
                {
                  "required": [
                    "active",
                    "passive"
                  ]
                }
              ],
              "properties": {
                "active": {
                  "type": "object",
                  "properties": {
                    "timeout": {
                      "type": "number",
                      "default": 1
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            302
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        }
                      }
                    },
                    "concurrency": {
                      "type": "integer",
                      "default": 10
                    },
                    "host": {
                      "type": "string",
                      "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                    },
                    "https_verify_certificate": {
                      "type": "boolean",
                      "default": true
                    },
                    "port": {
                      "type": "integer",
                      "maximum": 65535,
                      "minimum": 1
                    },
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "http_path": {
                      "type": "string",
                      "default": "/"
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            404,
                            500,
                            501,
                            502,
                            503,
                            504,
                            505
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 3
                        }
                      }
                    },
                    "req_headers": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "string",
                        "uniqueItems": true
                      }
                    }
                  }
                },
                "passive": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "http_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            500,
                            503
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 7
                        }
                      }
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            201,
                            202,
                            203,
                            204,
                            205,
                            206,
                            207,
                            208,
                            226,
                            300,
                            301,
                            302,
                            303,
                            304,
                            305,
                            306,
                            307,
                            308
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        }
                      }
                    }
                  }
                }
              }
            },
            "hash_on": {
              "type": "string",
              "enum": [
                "vars",
                "header",
                "cookie",
                "consumer",
                "vars_combinations"
              ],
              "default": "vars"
            },
            "nodes": {
              "anyOf": [
                {
                  "type": "object",
                  "patternProperties": {
                    ".*": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "weight of node"
                    }
                  }
                },
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "host",
                      "port",
                      "weight"
                    ],
                    "properties": {
                      "host": {
                        "type": "string",
                        "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                      },
                      "priority": {
                        "type": "integer",
                        "default": 0,
                        "description": "priority of node"
                      },
                      "metadata": {
                        "type": "object",
                        "description": "metadata of node"
                      },
                      "weight": {
                        "type": "integer",
                        "minimum": 0,
                        "description": "weight of node"
                      },
                      "port": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "port of node"
                      }
                    }
                  }
                }
              ]
            },
            "id": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "pattern": "^[a-zA-Z0-9-_.]+$"
                },
                {
                  "type": "integer",
                  "minimum": 1
                }
              ]
            },
            "desc": {
              "type": "string",
              "maxLength": 256
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "retry_timeout": {
              "type": "number",
              "minimum": 0
            },
            "keepalive_pool": {
              "type": "object",
              "properties": {
                "idle_timeout": {
                  "type": "number",
                  "minimum": 0,
                  "default": 60
                },
                "requests": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 1000
                },
                "size": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 320
                }
              }
            },
            "discovery_type": {
              "type": "string",
              "description": "discovery type"
            },
            "type": {
              "type": "string",
              "default": "roundrobin",
              "description": "algorithms of load balancing"
            },
            "discovery_args": {
              "type": "object",
              "properties": {
                "group_name": {
                  "type": "string",
                  "description": "group name"
                },
                "namespace_id": {
                  "type": "string",
                  "description": "namespace id"
                }
              }
            },
            "retries": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "remote_addr": {
          "type": "string",
          "anyOf": [
            {
              "type": "string",
              "title": "IPv4",
              "format": "ipv4"
            },
            {
              "type": "string",
              "title": "IPv4/CIDR",
              "pattern": "^([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\\.([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/([12]?[0-9]|3[0-2])$"
            },
            {
              "type": "string",
              "title": "IPv6",
              "format": "ipv6"
            },
            {
              "type": "string",
              "title": "IPv6/CIDR",
              "pattern": "^([a-fA-F0-9]{0,4}:){1,8}(:[a-fA-F0-9]{0,4}){0,8}([a-fA-F0-9]{0,4})?/[0-9]{1,3}$"
            }
          ],
          "description": "client IP"
        },
        "upstream_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "protocol": {
          "type": "object",
          "required": [
            "name"
          ],
          "properties": {
            "superior_id": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "pattern": "^[a-zA-Z0-9-_.]+$"
                },
                {
                  "type": "integer",
                  "minimum": 1
                }
              ]
            },
            "logger": {
              "type": "array",
              "items": {
                "properties": {
                  "filter": {
                    "type": "array",
                    "description": "logger filter rules"
                  },
                  "conf": {
                    "type": "object",
                    "description": "logger plugin configuration"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "dependencies": {
                  "name": [
                    "conf"
                  ]
                }
              }
            },
            "conf": {
              "type": "object",
              "description": "protocol-specific configuration"
            },
            "name": {
              "type": "string"
            }
          }
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "sni": {
          "type": "string",
          "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$",
          "description": "server name indication"
        },
        "plugins": {
          "type": "object"
        },
        "create_time": {
          "type": "integer"
        },
        "update_time": {
          "type": "integer"
        },
        "server_port": {
          "type": "integer",
          "description": "server port"
        }
      }
    },
    "upstream_hash_vars_schema": {
      "type": "string",
      "pattern": "^((uri|server_name|server_addr|request_uri|remote_port|remote_addr|query_string|host|hostname)|arg_[0-9a-zA-z_-]+)$"
    },
    "upstream_hash_header_schema": {
      "type": "string",
      "pattern": "^[a-zA-Z0-9-_]+$"
    },
    "plugins": {
      "type": "array",
      "items": {
        "type": "object",
        "required": [
          "name"
        ],
        "properties": {
          "stream": {
            "type": "boolean"
          },
          "name": {
            "type": "string",
            "minLength": 1
          }
        }
      }
    },
    "plugin_config": {
      "type": "object",
      "required": [
        "id",
        "plugins"
      ],
      "properties": {
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "update_time": {
          "type": "integer"
        },
        "create_time": {
          "type": "integer"
        },
        "plugins": {
          "type": "object"
        }
      }
    },
    "consumer": {
      "type": "object",
      "required": [
        "username"
      ],
      "properties": {
        "group_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "create_time": {
          "type": "integer"
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "plugins": {
          "type": "object"
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "username": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100,
          "pattern": "^[a-zA-Z0-9_]+$"
        },
        "update_time": {
          "type": "integer"
        }
      }
    },
    "service": {
      "type": "object",
      "properties": {
        "script": {
          "type": "string",
          "minLength": 10,
          "maxLength": 102400
        },
        "hosts": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
          },
          "minItems": 1,
          "uniqueItems": true
        },
        "name": {
          "type": "string",
          "minLength": 1,
          "maxLength": 100
        },
        "desc": {
          "type": "string",
          "maxLength": 256
        },
        "upstream": {
          "type": "object",
          "oneOf": [
            {
              "required": [
                "nodes"
              ]
            },
            {
              "required": [
                "service_name",
                "discovery_type"
              ]
            }
          ],
          "properties": {
            "timeout": {
              "type": "object",
              "required": [
                "connect",
                "send",
                "read"
              ],
              "properties": {
                "read": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "send": {
                  "type": "number",
                  "exclusiveMinimum": 0
                },
                "connect": {
                  "type": "number",
                  "exclusiveMinimum": 0
                }
              }
            },
            "pass_host": {
              "type": "string",
              "default": "pass",
              "enum": [
                "pass",
                "node",
                "rewrite"
              ],
              "description": "mod of host passing"
            },
            "upstream_host": {
              "type": "string",
              "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
            },
            "update_time": {
              "type": "integer"
            },
            "scheme": {
              "description": "The scheme of the upstream. For L7 proxy, it can be one of grpc/grpcs/http/https. For L4 proxy, it can be one of tcp/tls/udp. For specific protocols, it can be kafka.",
              "default": "http",
              "enum": [
                "grpc",
                "grpcs",
                "http",
                "https",
                "tcp",
                "tls",
                "udp",
                "kafka"
              ]
            },
            "service_name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 256
            },
            "create_time": {
              "type": "integer"
            },
            "labels": {
              "type": "object",
              "patternProperties": {
                ".*": {
                  "minLength": 1,
                  "maxLength": 64,
                  "type": "string",
                  "description": "value of label",
                  "pattern": "^\\S+$"
                }
              },
              "description": "key/value pairs to specify attributes"
            },
            "key": {
              "type": "string",
              "description": "the key of chash for dynamic load balancing"
            },
            "tls": {
              "type": "object",
              "dependencies": {
                "client_cert": {
                  "required": [
                    "client_key"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_key": {
                  "required": [
                    "client_cert"
                  ],
                  "not": {
                    "required": [
                      "client_cert_id"
                    ]
                  }
                },
                "client_cert_id": {
                  "not": {
                    "required": [
                      "client_client",
                      "client_key"
                    ]
                  }
                }
              },
              "properties": {
                "client_cert": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_key": {
                  "type": "string",
                  "minLength": 128,
                  "maxLength": 65536
                },
                "client_cert_id": {
                  "anyOf": [
                    {
                      "type": "string",
                      "minLength": 1,
                      "maxLength": 64,
                      "pattern": "^[a-zA-Z0-9-_.]+$"
                    },
                    {
                      "type": "integer",
                      "minimum": 1
                    }
                  ]
                },
                "verify": {
                  "type": "boolean",
                  "default": false,
                  "description": "Turn on server certificate verification, currently only kafka upstream is supported"
                }
              }
            },
            "checks": {
              "type": "object",
              "anyOf": [
                {
                  "required": [
                    "active"
                  ]
                },
                {
                  "required": [
                    "active",
                    "passive"
                  ]
                }
              ],
              "properties": {
                "active": {
                  "type": "object",
                  "properties": {
                    "timeout": {
                      "type": "number",
                      "default": 1
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            302
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        }
                      }
                    },
                    "concurrency": {
                      "type": "integer",
                      "default": 10
                    },
                    "host": {
                      "type": "string",
                      "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                    },
                    "https_verify_certificate": {
                      "type": "boolean",
                      "default": true
                    },
                    "port": {
                      "type": "integer",
                      "maximum": 65535,
                      "minimum": 1
                    },
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "http_path": {
                      "type": "string",
                      "default": "/"
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "interval": {
                          "type": "integer",
                          "minimum": 1,
                          "default": 1
                        },
                        "http_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            404,
                            500,
                            501,
                            502,
                            503,
                            504,
                            505
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 1,
                          "maximum": 254,
                          "default": 3
                        }
                      }
                    },
                    "req_headers": {
                      "type": "array",
                      "minItems": 1,
                      "items": {
                        "type": "string",
                        "uniqueItems": true
                      }
                    }
                  }
                },
                "passive": {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "default": "http",
                      "enum": [
                        "http",
                        "https",
                        "tcp"
                      ]
                    },
                    "unhealthy": {
                      "type": "object",
                      "properties": {
                        "http_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        },
                        "tcp_failures": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 2
                        },
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            429,
                            500,
                            503
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "timeouts": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 7
                        }
                      }
                    },
                    "healthy": {
                      "type": "object",
                      "properties": {
                        "http_statuses": {
                          "uniqueItems": true,
                          "type": "array",
                          "default": [
                            200,
                            201,
                            202,
                            203,
                            204,
                            205,
                            206,
                            207,
                            208,
                            226,
                            300,
                            301,
                            302,
                            303,
                            304,
                            305,
                            306,
                            307,
                            308
                          ],
                          "minItems": 1,
                          "items": {
                            "type": "integer",
                            "maximum": 599,
                            "minimum": 200
                          }
                        },
                        "successes": {
                          "type": "integer",
                          "minimum": 0,
                          "maximum": 254,
                          "default": 5
                        }
                      }
                    }
                  }
                }
              }
            },
            "hash_on": {
              "type": "string",
              "enum": [
                "vars",
                "header",
                "cookie",
                "consumer",
                "vars_combinations"
              ],
              "default": "vars"
            },
            "nodes": {
              "anyOf": [
                {
                  "type": "object",
                  "patternProperties": {
                    ".*": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "weight of node"
                    }
                  }
                },
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "required": [
                      "host",
                      "port",
                      "weight"
                    ],
                    "properties": {
                      "host": {
                        "type": "string",
                        "pattern": "^\\*?[0-9a-zA-Z-._\\[\\]:]+$"
                      },
                      "priority": {
                        "type": "integer",
                        "default": 0,
                        "description": "priority of node"
                      },
                      "metadata": {
                        "type": "object",
                        "description": "metadata of node"
                      },
                      "weight": {
                        "type": "integer",
                        "minimum": 0,
                        "description": "weight of node"
                      },
                      "port": {
                        "type": "integer",
                        "minimum": 1,
                        "description": "port of node"
                      }
                    }
                  }
                }
              ]
            },
            "id": {
              "anyOf": [
                {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 64,
                  "pattern": "^[a-zA-Z0-9-_.]+$"
                },
                {
                  "type": "integer",
                  "minimum": 1
                }
              ]
            },
            "desc": {
              "type": "string",
              "maxLength": 256
            },
            "name": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "retry_timeout": {
              "type": "number",
              "minimum": 0
            },
            "keepalive_pool": {
              "type": "object",
              "properties": {
                "idle_timeout": {
                  "type": "number",
                  "minimum": 0,
                  "default": 60
                },
                "requests": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 1000
                },
                "size": {
                  "type": "integer",
                  "minimum": 1,
                  "default": 320
                }
              }
            },
            "discovery_type": {
              "type": "string",
              "description": "discovery type"
            },
            "type": {
              "type": "string",
              "default": "roundrobin",
              "description": "algorithms of load balancing"
            },
            "discovery_args": {
              "type": "object",
              "properties": {
                "group_name": {
                  "type": "string",
                  "description": "group name"
                },
                "namespace_id": {
                  "type": "string",
                  "description": "namespace id"
                }
              }
            },
            "retries": {
              "type": "integer",
              "minimum": 0
            }
          }
        },
        "upstream_id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "id": {
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 64,
              "pattern": "^[a-zA-Z0-9-_.]+$"
            },
            {
              "type": "integer",
              "minimum": 1
            }
          ]
        },
        "labels": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "minLength": 1,
              "maxLength": 64,
              "type": "string",
              "description": "value of label",
              "pattern": "^\\S+$"
            }
          },
          "description": "key/value pairs to specify attributes"
        },
        "plugins": {
          "type": "object"
        },
        "enable_websocket": {
          "type": "boolean",
          "description": "enable websocket for request"
        },
        "update_time": {
          "type": "integer"
        },
        "create_time": {
          "type": "integer"
        }
      }
    }
  }
}
